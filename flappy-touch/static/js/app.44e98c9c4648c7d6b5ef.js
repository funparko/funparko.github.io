webpackJsonp([0],{"9WlE":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"flappy",attrs:{id:"flappy"}},[e("div",{staticClass:"body"})])},staticRenderFns:[]};var n={name:"Obstacle",props:["index","distance"],mounted:function(t){this.top=this.$refs.top,this.bottom=this.$refs.bottom,this.move()},methods:{draw:function(){if(this.top&&this.bottom){var t=-(this.distance+50+70*this.index)%210+100;this.top.style.left=t+"%",this.bottom.style.left=t+"%",this.reportPosition(),t<-10?this.visible&&(this.move(),this.visible=!1):this.visible=!0}},move:function(){var t=70*Math.random()+10;this.top.style.top=t-100+"%",this.bottom.style.top=t+20+"%"},reportPosition:function(){var t={id:"obstacles",positions:[{id:"top-"+this.index,left:this.top.offsetLeft,top:this.top.offsetTop,right:this.top.offsetLeft+this.top.clientWidth,bottom:this.top.offsetTop+this.top.clientHeight},{id:"bottom-"+this.index,left:this.bottom.offsetLeft,top:this.bottom.offsetTop,right:this.bottom.offsetLeft+this.bottom.clientWidth,bottom:this.bottom.offsetTop+this.bottom.clientHeight}]};this.$emit("currentPosition",t)}},data:function(){return{top:null,bottom:null,startDistance:100,visible:!0}},watch:{distance:{immediate:!0,handler:function(){this.draw()}}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"obstacle"},[e("div",{ref:"top",staticClass:"part top"}),this._v(" "),e("div",{ref:"bottom",staticClass:"part bottom"})])},staticRenderFns:[]};var r={name:"stage",props:["forceValue"],components:{flappy:i("VU/8")({name:"Flappy",props:["flappyY"],mounted:function(){this.element=this.$refs.flappy,this.reportPosition()},methods:{draw:function(){if(this.element){var t=90-100*this.flappyY*.9+"%";this.element.style.top=t,this.reportPosition()}},reportPosition:function(){var t={id:"flappy",position:{left:this.element.offsetLeft,top:this.element.offsetTop,right:this.element.offsetLeft+this.element.clientWidth,bottom:this.element.offsetTop+this.element.clientHeight}};this.$emit("currentPosition",t)}},data:function(){return{element:null}},watch:{flappyY:{immediate:!0,handler:function(){this.draw()}}}},s,!1,function(t){i("Zjv1")},"data-v-dbc1025e",null).exports,obstacle:i("VU/8")(n,a,!1,function(t){i("9WlE")},"data-v-0d5054c6",null).exports},created:function(){var t=parseInt(localStorage.getItem("highscore"));t&&(this.highscore=t)},methods:{start:function(){this.started||(this.started=!0),this.running||(this.running=!0,this.score=0,this.distance=0,this.accelerationRate=.5,this.$nextTick(function(){this.frame=requestAnimationFrame(this.update.bind(this)),this.interval=setInterval(this.updateAcceleration.bind(this),1e3)}))},stop:function(){cancelAnimationFrame(this.frame),clearInterval(this.interval),this.running=!1,this.score>this.highscore&&(this.highscore=this.score,localStorage.setItem("highscore",this.highscore))},update:function(){this.frame=requestAnimationFrame(this.update.bind(this)),this.distance+=this.accelerationRate,this.checkCollsions()},checkCollsions:function(){var t,e;for(var i in this.obstaclesPosition)if(this.obstaclesPosition.hasOwnProperty(i)){var o=this.obstaclesPosition[i];t=o,(e=this.flappyPosition).left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top||this.stop()}},updatePositions:function(t){if("obstacles"===t.id)for(var e=0;e<t.positions.length;e++)this.obstaclesPosition[t.positions[e].id]=t.positions[e];else"flappy"===t.id&&(this.flappyPosition=t.position)},updateAcceleration:function(){this.accelerationRate=this.accelerationRate*this.accelerate,this.score+=10}},data:function(){return{running:!1,started:!1,flappyX:0,distance:0,accelerate:1.01,accelerationRate:.5,score:0,highscore:0,frame:null,interval:null,obstaclesPosition:{},flappyPosition:{}}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"game"}},[i("div",{attrs:{id:"stage"}},[i("div",{ref:"score",attrs:{id:"score"}},[t._v(t._s(t.score))]),t._v(" "),i("flappy",{attrs:{flappyY:t.forceValue},on:{currentPosition:t.updatePositions}}),t._v(" "),i("obstacle",{attrs:{index:0,distance:t.distance},on:{currentPosition:t.updatePositions}}),t._v(" "),i("obstacle",{attrs:{index:1,distance:t.distance},on:{currentPosition:t.updatePositions}}),t._v(" "),i("obstacle",{attrs:{index:2,distance:t.distance},on:{currentPosition:t.updatePositions}}),t._v(" "),!t.running&&t.started?i("div",{attrs:{id:"gameover-screen"}},[i("h1",[t._v("GAME OVER")]),t._v(" "),i("button",{ref:"start",attrs:{id:"start-button"},on:{click:t.start,touchstart:t.start}},[t._v("START")])]):t._e()],1),t._v(" "),i("div",{attrs:{id:"highscore"}},[t._v("HIGHSCORE: "+t._s(this.highscore))])])},staticRenderFns:[]};var h=i("VU/8")(r,c,!1,function(t){i("VKLi")},"data-v-13305fc8",null).exports,l={name:"App",components:{stage:h},methods:{startGame:function(t){this.running=!0,this.$refs.game.start()},start:function(t){t.preventDefault()},end:function(){setTimeout(this.stop.bind(this),10)},stop:function(){this.forceValue=0},move:function(t){t.preventDefault()},onTouchForceChange:function(t){this.forceValue=t.changedTouches[0].force,this.$refs.control.style.transform="scale("+(1+.4*this.forceValue)+")"},onClickForceChange:function(t){this.forceValue=t.webkitForce/3}},data:function(){return{forceValue:0,running:!1}},filters:{round:function(t){return Math.round(100*t)/100}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main",{staticClass:"container",attrs:{id:"app"},on:{touchstart:t.start,touchend:t.end,touchmove:t.move,touchforcechange:t.onTouchForceChange,webkitmouseforcechanged:t.onTouchForceChange}},[i("stage",{ref:"game",attrs:{forceValue:t.forceValue}}),t._v(" "),t.running?t._e():i("div",{attrs:{id:"start-screen"}},[i("div",{staticClass:"content"},[i("p",[t._v("Use 3D Touch to prevent the red square from hitting the obstacles. Push red cirle below to try.")]),t._v(" "),i("button",{ref:"start",attrs:{id:"start-button"},on:{click:t.startGame,touchstart:t.startGame}},[t._v("START")])])]),t._v(" "),i("div",{ref:"control",attrs:{id:"control"}})],1)},staticRenderFns:[]};var u=i("VU/8")(l,f,!1,function(t){i("ZDxm")},null,null).exports,p=i("/ocq");o.a.use(p.a);var d=new p.a({routes:[{path:"/",name:"Stage",component:h}]});o.a.config.productionTip=!1,new o.a({el:"#app",router:d,components:{App:u},template:"<App/>"})},VKLi:function(t,e){},ZDxm:function(t,e){},Zjv1:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.44e98c9c4648c7d6b5ef.js.map